<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chi tiết sản phẩm - QuangHưng Mobile</title>
  <meta name="description" content="Chi tiết sản phẩm" />

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="style.css" />

  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

  <style>
    /* Custom Swiper Styles */
    .swiper-button-next,
    .swiper-button-prev {
      color: #dc2626;
      background: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    .swiper-button-next:after,
    .swiper-button-prev:after {
      font-size: 18px;
      font-weight: bold;
    }

    .swiper-pagination-bullet-active {
      background: #dc2626;
    }

    .thumbnail-item {
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      padding: 8px;
      transition: all 0.3s;
      cursor: pointer;
    }

    .thumbnail-item:hover,
    .thumbnail-item.active {
      border-color: #dc2626;
    }

    .zoom-image {
      transition: transform 0.3s ease;
    }

    .zoom-container:hover .zoom-image {
      transform: scale(1.1);
    }

    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: white;
      padding: 16px 24px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      display: flex;
      align-items: center;
      gap: 12px;
      z-index: 9999;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
    }

    .toast.show {
      opacity: 1;
      transform: translateY(0);
    }

    .sticky-buy {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
      padding: 12px 0;
      z-index: 50;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    .sticky-buy.active {
      transform: translateY(0);
    }
  </style>
</head>

<body class="bg-gray-50">
  <!-- Header Component -->
  <div id="header-placeholder"></div>
  
  <!-- Spacer for fixed header - Responsive -->
  <div class="h-[80px] md:h-[100px] lg:h-[140px]"></div>

  <main class="container mx-auto px-4 py-5 lg:py-6">
    <!-- Breadcrumb -->
    <nav class="text-sm mb-5 flex items-center gap-2">
      <a href="index.html" class="text-gray-600 hover:text-red-600 transition font-medium">
        <i class="fas fa-home mr-1"></i>Trang chủ
      </a>
      <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
      <a href="products.html" class="text-gray-600 hover:text-red-600 transition font-medium">Sản phẩm</a>
      <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
      <span id="breadcrumbProduct" class="text-gray-800 font-semibold"></span>
    </nav>

    <!-- Product Container -->
    <div id="productContainer" class="grid grid-cols-1 lg:grid-cols-2 gap-5 lg:gap-7 mb-10"></div>

    <!-- Product Tabs -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-10">
      <!-- Tab Headers -->
      <div class="border-b border-gray-200 bg-gray-50">
        <div class="flex overflow-x-auto">
          <button onclick="switchTab('description', event)"
            class="tab-button active text-red-600 border-red-600 px-5 py-3.5 font-bold text-sm whitespace-nowrap border-b-3 transition">
            <i class="fas fa-file-alt mr-2"></i>Mô tả sản phẩm
          </button>
          <button onclick="switchTab('specs', event)"
            class="tab-button text-gray-600 px-5 py-3.5 font-bold text-sm whitespace-nowrap border-b-3 border-transparent hover:text-red-600 transition">
            <i class="fas fa-list mr-2"></i>Thông số kỹ thuật
          </button>
          <button onclick="switchTab('reviews', event)"
            class="tab-button text-gray-600 px-5 py-3.5 font-bold text-sm whitespace-nowrap border-b-3 border-transparent hover:text-red-600 transition">
            <i class="fas fa-star mr-2"></i>Đánh giá (<span id="totalReviews">0</span>)
          </button>
        </div>
      </div>

      <!-- Tab Contents -->
      <div class="p-5 lg:p-7">
        <!-- Description Tab -->
        <div id="tab-description" class="tab-content">
          <div id="productDescription"></div>
        </div>

        <!-- Specs Tab -->
        <div id="tab-specs" class="tab-content hidden">
          <div id="productSpecs"></div>
        </div>

        <!-- Reviews Tab -->
        <div id="tab-reviews" class="tab-content hidden">
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Rating Summary -->
            <div class="lg:col-span-1">
              <div class="bg-gradient-to-br from-red-50 to-orange-50 rounded-xl p-6 text-center border border-red-100">
                <div class="text-5xl font-extrabold text-red-600 mb-2" id="avgRating">0</div>
                <div class="text-yellow-400 text-2xl mb-2" id="avgStars"></div>
                <p class="text-gray-700 text-sm font-medium"><span id="totalReviews2"
                    class="font-bold text-base">0</span> đánh giá</p>
              </div>

              <button onclick="toggleReviewForm()"
                class="w-full mt-4 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-4 rounded-lg transition flex items-center justify-center gap-2">
                <i class="fas fa-edit"></i>
                Viết đánh giá
              </button>

              <!-- Review Form -->
              <div id="reviewForm" class="hidden mt-4 bg-white border border-gray-200 rounded-lg p-4">
                <h4 class="font-bold mb-3">Đánh giá của bạn</h4>
                <div class="mb-3">
                  <label class="block text-sm font-medium mb-2">Chọn số sao</label>
                  <div class="flex gap-2">
                    <button onclick="setRating(1)"
                      class="rating-star text-2xl text-gray-300 hover:text-yellow-400 transition"><i
                        class="far fa-star"></i></button>
                    <button onclick="setRating(2)"
                      class="rating-star text-2xl text-gray-300 hover:text-yellow-400 transition"><i
                        class="far fa-star"></i></button>
                    <button onclick="setRating(3)"
                      class="rating-star text-2xl text-gray-300 hover:text-yellow-400 transition"><i
                        class="far fa-star"></i></button>
                    <button onclick="setRating(4)"
                      class="rating-star text-2xl text-gray-300 hover:text-yellow-400 transition"><i
                        class="far fa-star"></i></button>
                    <button onclick="setRating(5)"
                      class="rating-star text-2xl text-gray-300 hover:text-yellow-400 transition"><i
                        class="far fa-star"></i></button>
                  </div>
                </div>
                <input type="text" id="reviewName" placeholder="Tên của bạn"
                  class="w-full border border-gray-300 rounded-lg px-3 py-2 mb-3 text-sm focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none">
                <textarea id="reviewComment" placeholder="Nhận xét của bạn..." rows="4"
                  class="w-full border border-gray-300 rounded-lg px-3 py-2 mb-3 text-sm focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none"></textarea>
                <button onclick="submitReview()"
                  class="w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition">
                  Gửi đánh giá
                </button>
              </div>
            </div>

            <!-- Reviews List -->
            <div class="lg:col-span-2">
              <div class="flex items-center justify-between mb-5">
                <h3 class="text-lg font-bold text-gray-900">Đánh giá từ khách hàng</h3>
                <div class="flex gap-2 flex-wrap">
                  <button onclick="filterReviews('all', event)"
                    class="filter-btn active bg-red-600 text-white border-red-600 px-3 py-1.5 text-xs font-semibold border-2 rounded-full transition">Tất
                    cả</button>
                  <button onclick="filterReviews(5, event)"
                    class="filter-btn text-gray-700 border-gray-300 px-3 py-1.5 text-xs font-semibold border-2 rounded-full hover:border-red-600 hover:text-red-600 transition">5
                    <i class="fas fa-star text-yellow-400 text-xs"></i></button>
                  <button onclick="filterReviews(4, event)"
                    class="filter-btn text-gray-700 border-gray-300 px-3 py-1.5 text-xs font-semibold border-2 rounded-full hover:border-red-600 hover:text-red-600 transition">4
                    <i class="fas fa-star text-yellow-400 text-xs"></i></button>
                  <button onclick="filterReviews(3, event)"
                    class="filter-btn text-gray-700 border-gray-300 px-3 py-1.5 text-xs font-semibold border-2 rounded-full hover:border-red-600 hover:text-red-600 transition">3
                    <i class="fas fa-star text-yellow-400 text-xs"></i></button>
                </div>
              </div>
              <div id="reviewsList" class="space-y-5"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Related Products -->
    <section>
      <h2 class="text-xl lg:text-2xl font-bold mb-5 text-gray-900 flex items-center gap-2">
        <i class="fas fa-box-open text-red-600"></i>
        <span>Sản phẩm liên quan</span>
      </h2>
      <div id="relatedProducts" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4"></div>
    </section>
  </main>

  <!-- Sticky Buy Button -->
  <div id="stickyBuy" class="sticky-buy">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between gap-4">
        <div class="flex items-center gap-4">
          <img id="stickyImage" src="" alt=""
            class="w-16 h-16 object-contain rounded-lg border border-gray-200 hidden md:block">
          <div>
            <h3 id="stickyName" class="font-bold text-sm text-gray-900 line-clamp-1"></h3>
            <p id="stickyPrice" class="text-lg font-bold text-red-600"></p>
          </div>
        </div>
        <div class="flex gap-3">
          <button onclick="addToCart()"
            class="hidden md:flex items-center gap-2 bg-white border-2 border-red-600 text-red-600 font-semibold px-6 py-3 rounded-lg hover:bg-red-50 transition">
            <i class="fas fa-shopping-cart"></i>
            <span>Thêm giỏ</span>
          </button>
          <button onclick="buyNow()"
            class="flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white font-semibold px-6 py-3 rounded-lg transition">
            <i class="fas fa-bolt"></i>
            <span>Mua ngay</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer Component -->
  <div id="footer-placeholder"></div>

  <!-- Swiper JS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

  <!-- Load Header Component -->
  <script>
    (function () {
      function loadHeader() {
        const headerPlaceholder = document.getElementById('header-placeholder');
        if (!headerPlaceholder) {
          console.warn('Header placeholder not found');
          return;
        }

        fetch('components/header.html')
          .then(response => response.text())
          .then(html => {
            headerPlaceholder.innerHTML = html;
            const script = document.createElement('script');
            script.src = 'components/header.js';
            document.body.appendChild(script);
          })
          .catch(error => console.error('Error loading header:', error));
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadHeader);
      } else {
        loadHeader();
      }
    })();
  </script>

  <!-- Load Footer Component -->
  <script>
    (function () {
      function loadFooter() {
        const footerPlaceholder = document.getElementById('footer-placeholder');
        if (!footerPlaceholder) {
          console.warn('Footer placeholder not found');
          return;
        }

        fetch('components/footer.html')
          .then(response => response.text())
          .then(html => {
            footerPlaceholder.innerHTML = html;
          })
          .catch(error => console.error('Error loading footer:', error));
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadFooter);
      } else {
        loadFooter();
      }
    })();
  </script>

  <script src="product-detail.js"></script>
</body>

</html>